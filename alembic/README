// this is my Spoonacular Api Code

let searchButton = document.querySelector('#search')


// Add an event listener to the button that runs the function sendApiRequest when it is clicked
searchButton.addEventListener("click", () => {
    console.log("button clicked")
    var inputValue = document.getElementById('searchInput').value;
    console.log(inputValue)
    // Clear the content before a new search
    document.querySelector("#content").innerHTML = '';
    sendApiRequest(inputValue)
})

// An asynchronous function to fetch data from the API
async function sendApiRequest(inputValue){
    let API_KEY = '25ab6258c1734f14890c7546a7795903'

    var response = await fetch (`https://api.spoonacular.com/recipes/complexSearch?apiKey=${API_KEY}&query=${inputValue}&maxFat=25&number=10&instructionsRequired=true`);
    let data = await response.json()

    for (let i = 0; i < data.results.length; i++) {
        let recipeId = data.results[i].id;
        let recipeResponse = await fetch(`https://api.spoonacular.com/recipes/${recipeId}/information?apiKey=${API_KEY}`);
        let recipeData = await recipeResponse.json();
        console.log(recipeData);
        useApiData(recipeData);
    }
}


// function that does something with API 
function useApiData(data){
    let i = data.analyzedInstructions[0].steps.map((step, index) => `<p class="card-text">${index + 1}. ${step.step}</p>`).join("");

    // Append the new recipe card to the existing content
    document.querySelector("#content").innerHTML += `
    <div id="content" class="card-container">
    <div class="card col-3 offset-1" style="width: 18rem;">
        <h5 class="card-title">${data.title}</h5>
        <img src="${data.image}" class="card-img-top" alt="...">
        <div class="card-body">
        <h5> Cooking Instructions</h5>
        ${i}
        </div>
    </div>
    </div>
    `
}
// second not sure version
// // this is my Spoonacular Api Code

// let searchButton = document.querySelector('#search')


// // Add an event listener to the button that runs the function sendApiRequest when it is clicked
// searchButton.addEventListener("click", () => {
//     console.log("button clicked")
//     var inputValue = document.getElementById('searchInput').value;
//     console.log(inputValue)
//     // Clear the content before a new search
//     document.querySelector("#content").innerHTML = '';
//     sendApiRequest(inputValue)
// })

// // An asynchronous function to fetch data from the API
// async function sendApiRequest(inputValue){
//     let API_KEY = '25ab6258c1734f14890c7546a7795903'

//     var response = await fetch (`https://api.spoonacular.com/recipes/complexSearch?apiKey=${API_KEY}&query=${inputValue}&maxFat=25&number=10&instructionsRequired=true`);
//     let data = await response.json()

//     for (let i = 0; i < data.results.length; i++) {
//         let recipeId = data.results[i].id;
//         let recipeResponse = await fetch(`https://api.spoonacular.com/recipes/${recipeId}/information?apiKey=${API_KEY}`);
//         let recipeData = await recipeResponse.json();
//         console.log(recipeData);
//         useApiData(recipeData);
//     }
// }


// // function that does something with API 
// function useApiData(data){
//     let i = data.analyzedInstructions[0].steps.map((step, index) => `<p class="card-text">${index + 1}. ${step.step}</p>`).join("");
 
//     // Append the new recipe card to the existing content
//     document.querySelector("#content").innerHTML += `
//     <div class="card col-6 offset-2" style="width: 22rem;">
//         <img src="${data.image}" class="card-img-top" alt="...">
//         <div class="card-body">
//           <h5 class="card-title">${data.title}</h5>
//           <h5> Cooking Instructions</h5>
//           ${i}
//           <a href="${data.url}" class="btn btn-primary">Recipe</a>
//         </div>
//     </div>
//     `;
//  }
 

