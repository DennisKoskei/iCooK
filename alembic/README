// this is my Spoonacular Api Code

let searchButton = document.querySelector('#search')


// Add an event listener to the button that runs the function sendApiRequest when it is clicked
searchButton.addEventListener("click", () => {
    console.log("button clicked")
    var inputValue = document.getElementById('searchInput').value;
    console.log(inputValue)
    // Clear the content before a new search
    document.querySelector("#content").innerHTML = '';
    sendApiRequest(inputValue)
})

// An asynchronous function to fetch data from the API
async function sendApiRequest(inputValue){
    let API_KEY = '25ab6258c1734f14890c7546a7795903'

    var response = await fetch (`https://api.spoonacular.com/recipes/complexSearch?apiKey=${API_KEY}&query=${inputValue}&maxFat=25&number=10&instructionsRequired=true`);
    let data = await response.json()

    for (let i = 0; i < data.results.length; i++) {
        let recipeId = data.results[i].id;
        let recipeResponse = await fetch(`https://api.spoonacular.com/recipes/${recipeId}/information?apiKey=${API_KEY}`);
        let recipeData = await recipeResponse.json();
        console.log(recipeData);
        useApiData(recipeData);
    }
}


// function that does something with API 
function useApiData(data){
    let i = data.analyzedInstructions[0].steps.map((step, index) => `<p class="card-text">${index + 1}. ${step.step}</p>`).join("");

    // Append the new recipe card to the existing content
    document.querySelector("#content").innerHTML += `
    <div id="content" class="card-container">
    <div class="card col-3 offset-1" style="width: 18rem;">
        <h5 class="card-title">${data.title}</h5>
        <img src="${data.image}" class="card-img-top" alt="...">
        <div class="card-body">
        <h5> Cooking Instructions</h5>
        ${i}
        </div>
    </div>
    </div>
    `
}
// second not sure version
// // this is my Spoonacular Api Code

// let searchButton = document.querySelector('#search')


// // Add an event listener to the button that runs the function sendApiRequest when it is clicked
// searchButton.addEventListener("click", () => {
//     console.log("button clicked")
//     var inputValue = document.getElementById('searchInput').value;
//     console.log(inputValue)
//     // Clear the content before a new search
//     document.querySelector("#content").innerHTML = '';
//     sendApiRequest(inputValue)
// })

// // An asynchronous function to fetch data from the API
// async function sendApiRequest(inputValue){
//     let API_KEY = '25ab6258c1734f14890c7546a7795903'

//     var response = await fetch (`https://api.spoonacular.com/recipes/complexSearch?apiKey=${API_KEY}&query=${inputValue}&maxFat=25&number=10&instructionsRequired=true`);
//     let data = await response.json()

//     for (let i = 0; i < data.results.length; i++) {
//         let recipeId = data.results[i].id;
//         let recipeResponse = await fetch(`https://api.spoonacular.com/recipes/${recipeId}/information?apiKey=${API_KEY}`);
//         let recipeData = await recipeResponse.json();
//         console.log(recipeData);
//         useApiData(recipeData);
//     }
// }


// // function that does something with API 
// function useApiData(data){
//     let i = data.analyzedInstructions[0].steps.map((step, index) => `<p class="card-text">${index + 1}. ${step.step}</p>`).join("");
 
//     // Append the new recipe card to the existing content
//     document.querySelector("#content").innerHTML += `
//     <div class="card col-6 offset-2" style="width: 22rem;">
//         <img src="${data.image}" class="card-img-top" alt="...">
//         <div class="card-body">
//           <h5 class="card-title">${data.title}</h5>
//           <h5> Cooking Instructions</h5>
//           ${i}
//           <a href="${data.url}" class="btn btn-primary">Recipe</a>
//         </div>
//     </div>
//     `;
//  }
 

// third correct code
// let searchButton = document.querySelector('#search')

// // Function to fetch and display data
// function fetchAndDisplayData(inputValue) {
//  let APP_ID = '5f8d15e8'
//  let API_KEY = '7e4f94d1f57158c014144b6f0864dc56'

//  // Replace 'yourApiUrl' with the URL of the API you're using
//  var apiUrl = `https://api.edamam.com/search?app_id=${APP_ID}&app_key=${API_KEY}&q=${inputValue}`

//  fetch(apiUrl)
//      .then(response => response.json())
//      .then(data => useApiData(data))
//      .catch(error => console.error('Error:', error));
// }

// // Function to handle search button click
// searchButton.addEventListener('click', function() {
//  var inputValue = document.getElementById('searchInput').value;
//  fetchAndDisplayData(inputValue);
// });

// // Call fetchAndDisplayData when the page loads
// window.onload = function() {
//  var foodItems = ['apple', 'banana', 'carrot', 'chicken', 'fish', 'grape', 'kiwi', 'lemon', 'mango', 'orange', 'pineapple', 'strawberry', 'tomato', 'watermelon']; // Replace this with your list of food items
//  var randomIndex = Math.floor(Math.random() * foodItems.length);
//  var randomFoodItem = foodItems[randomIndex];
//  fetchAndDisplayData(randomFoodItem); // Fetch and display data for a random food item when the page loads
// };

// function useApiData(data){
//     if (data.hits && data.hits.length > 0) {
//      let content = '<div class="card-container">';
//      data.hits.forEach(hit => {
//          let recipeUrl = `/recipe/${hit.recipe.label}`;
//          let ingredients = hit.recipe.ingredientLines;
//          let ingredientList = ingredients.map(ingredient => `<li>${ingredient}</li>`).join('');
//          content += `
//          <div class="card col-6 offset-2" style="width: 22rem;">
//          <a href="${recipeUrl}">
//              <h5 class="card-title">${hit.recipe.label}</h5>
//              <img src="${hit.recipe.image}" class="card-img-top" alt="...">
//              <ol>${ingredientList}</ol>
//          </a>
//              <div class="card-body">
//              </div>
//          </div>
//          `;
//      });
//      content += '</div>';
//      document.querySelector("#content").innerHTML = content;
//     } else {
//      console.error('No hits found in the API response');
//     }
//    }
